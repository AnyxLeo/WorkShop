{"id":"Sjaa","dependencies":[{"name":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\package.json","includedInParent":true,"mtime":1567469419529},{"name":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-react\\package.json","includedInParent":true,"mtime":1567480634804},{"name":"react","loc":{"line":57,"column":20},"parent":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-react\\dist\\Hooks\\useDataGrid.js","resolved":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\react\\index.js"},{"name":"tubular-common","loc":{"line":58,"column":31},"parent":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-react\\dist\\Hooks\\useDataGrid.js","resolved":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-common\\dist\\index.js"},{"name":"../Storage","loc":{"line":59,"column":24},"parent":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-react\\dist\\Hooks\\useDataGrid.js","resolved":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-react\\dist\\Storage\\index.js"},{"name":"../Storage/NullStorage","loc":{"line":60,"column":28},"parent":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-react\\dist\\Hooks\\useDataGrid.js","resolved":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-react\\dist\\Storage\\NullStorage.js"},{"name":"../utils/TubularHttpClient","loc":{"line":61,"column":34},"parent":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-react\\dist\\Hooks\\useDataGrid.js","resolved":"C:\\Users\\Anyx\\Documents\\Unosquare\\Tubular\\Tubular.Web\\client-app\\node_modules\\tubular-react\\dist\\utils\\TubularHttpClient.js"}],"generated":{"js":"\"use strict\";var e=this&&this.__assign||function(){return(e=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var a in t=arguments[r])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e}).apply(this,arguments)},t=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))(function(a,o){function u(e){try{l(n.next(e))}catch(t){o(t)}}function i(e){try{l(n.throw(e))}catch(t){o(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(u,i)}l((n=n.apply(e,t||[])).next())})},r=this&&this.__generator||function(e,t){var r,n,a,o,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(o){return function(i){return function(o){if(r)throw new TypeError(\"Generator is already executing.\");for(;u;)try{if(r=1,n&&(a=2&o[0]?n.return:o[0]?n.throw||((a=n.return)&&a.call(n),0):n.next)&&!(a=a.call(n,o[1])).done)return a;switch(n=0,a&&(o=[2&o[0],a.value]),o[0]){case 0:case 1:a=o;break;case 4:return u.label++,{value:o[1],done:!1};case 5:u.label++,n=o[1],o=[0];continue;case 7:o=u.ops.pop(),u.trys.pop();continue;default:if(!(a=(a=u.trys).length>0&&a[a.length-1])&&(6===o[0]||2===o[0])){u=0;continue}if(3===o[0]&&(!a||o[1]>a[0]&&o[1]<a[3])){u.label=o[1];break}if(6===o[0]&&u.label<a[1]){u.label=a[1],a=o;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(o);break}a[2]&&u.ops.pop(),u.trys.pop();continue}o=t.call(e,u)}catch(i){o=[6,i],n=0}finally{r=a=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,i])}}},n=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),a=0;for(t=0;t<r;t++)for(var o=arguments[t],u=0,i=o.length;u<i;u++,a++)n[a]=o[u];return n};Object.defineProperty(exports,\"__esModule\",{value:!0});var a=require(\"react\"),o=require(\"tubular-common\"),u=require(\"../Storage\"),i=require(\"../Storage/NullStorage\"),l=require(\"../utils/TubularHttpClient\"),s=function(e){return function(n){return t(void 0,void 0,void 0,function(){var t,a;return r(this,function(r){switch(r.label){case 0:return[4,((t=e).request?t:new l.default(e)).fetch(n)];case 1:if(a=r.sent(),!l.default.isValidResponse(a))throw new Error(\"Server response is a invalid Tubular object\");return a.Payload=a.Payload.map(function(e){return l.default.parsePayload(e,n.Columns)}),[2,a]}})})}},c=function(e){return function(t){return new Promise(function(r,n){try{r(o.default.getResponse(t,e))}catch(a){n(a)}})}},f=function(l,f,d,g){var h=a.useState(!1),p=h[0],v=h[1],y=a.useState(l),b=y[0],m=y[1],P=a.useState(!1),C=P[0],w=P[1],S=a.useState(null),x=S[0],F=S[1],R=a.useState(!1),T=R[0],q=(R[1],a.useState(f.itemsPerPage||10)),N=q[0],_=q[1],E=a.useState(f.storage||new i.NullStorage)[0],O=a.useState(f.page||0),A=O[0],j=O[1],k=a.useState(f.searchText||\"\"),G=k[0],M=k[1],V=a.useState(null),L=V[0],z=V[1],H=d instanceof Array?c(d):s(d),I=a.useState({aggregate:null,data:[],filteredRecordCount:0,totalRecordCount:0}),B=I[0],D=I[1];E instanceof u.LocalStorage&&E.setGridName(f.gridName);var J={exportTo:function(e,n){return t(void 0,void 0,void 0,function(){var t,a;return r(this,function(r){switch(r.label){case 0:return 0===B.filteredRecordCount?[2]:(t=B.data,e?[4,H(new o.GridRequest(b,-1,0,G))]:[3,2]);case 1:a=r.sent().Payload,t=a,r.label=2;case 2:return n(t,b),[2]}})})},goToPage:function(e){A!==e&&j(e)},handleFilterChange:function(t){F(e(e({},x),{Filter:e(e({},x.Filter),t)}))},processRequest:function(){return t(void 0,void 0,void 0,function(){var e,t,n,a;return r(this,function(r){switch(r.label){case 0:v(!0),r.label=1;case 1:return r.trys.push([1,3,,4]),e=new o.GridRequest(b,N,A,G),[4,H(e)];case 2:return t=r.sent(),n=Math.ceil(t.TotalRecordCount/N),t.CurrentPage=t.CurrentPage>n?n:t.CurrentPage,E.setPage(t.CurrentPage-1),E.setColumns(b),E.setTextSearch(G),D({aggregate:t.AggregationPayload,data:t.Payload,filteredRecordCount:t.FilteredRecordCount||0,totalRecordCount:t.TotalRecordCount||0}),v(!1),w(!0),z(null),j(t.CurrentPage-1),[3,4];case 3:return a=r.sent(),f.onError&&f.onError(a),v(!1),z(a),[3,4];case 4:return[2]}})})},setActiveColumn:F,setFilter:function(t){var r=n(b),a=r.find(function(e){return e.Name===x.Name});a&&(a.Filter=e(e({},x.Filter),t),m(n(r)))},sortColumn:function(e){var t=o.ColumnModel.sortColumnArray(e,n(b),T);m(t)},updateItemPerPage:function(e){N!==e&&_(e)},updateSearchText:function(e){G!==e&&M(e)}},K=[b,A,G,N,d];g&&(K=K.concat(g)),a.useEffect(function(){J.processRequest()},K);C||function(){E.getPage()&&j(E.getPage());var e=E.getColumns();if(e){var t=n(b);e.forEach(function(e){var r=t.find(function(t){return t.Name===e.Name});r&&(r.Visible=e.Visible,null!==r.Filter&&null!==r.Filter.Text||null!=e.Filter&&null!=e.Filter.Text&&e.Filter.Operator!==o.CompareOperators.NONE&&(r.Filter=e.Filter))}),m(t)}w(!0)}();var Q=e(e({},B),{activeColumn:x,columns:b,error:L,initialized:C,isLoading:p,itemsPerPage:N,multiSort:T,page:A,searchText:G,storage:E});return{api:J,state:Q}};exports.default=f;"},"sourceMaps":null,"error":null,"hash":"489c759b85bde45a456b53d0cfe0ba69","cacheData":{"env":{}}}